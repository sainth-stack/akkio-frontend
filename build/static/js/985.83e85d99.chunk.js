"use strict";(self.webpackChunkkeypulse=self.webpackChunkkeypulse||[]).push([[985],{31160:function(e,n,a){a.d(n,{Z:function(){return w}});var t=a(74165),s=a(15861),r=a(1413),i=a(29439),o=a(72791),l=a(31243),c=a(57689),u=a(99914),d=a(84373),p=a(82041),m=a(45987),v=a(41418),h=a.n(v),x=a(80184),f=["xxl","xl","lg","md","sm","xs"],j=o.createContext({prefixes:{},breakpoints:f,minBreakpoint:"xs"});j.Consumer,j.Provider;function N(e,n){var a=(0,o.useContext)(j).prefixes;return e||a[n]||n}var b=["bsPrefix","variant","animation","size","as","className"],g=o.forwardRef((function(e,n){var a=e.bsPrefix,t=e.variant,s=e.animation,i=void 0===s?"border":s,o=e.size,l=e.as,c=void 0===l?"div":l,u=e.className,d=(0,m.Z)(e,b);a=N(a,"spinner");var p="".concat(a,"-").concat(i);return(0,x.jsx)(c,(0,r.Z)((0,r.Z)({ref:n},d),{},{className:h()(u,p,o&&"".concat(p,"-").concat(o),t&&"text-".concat(t))}))}));g.displayName="Spinner";var C=g,w=function(e){var n=(0,o.useState)(!1),a=(0,i.Z)(n,2),m=a[0],v=a[1],h=(0,u.E)(),f=h.uploadedData,j=h.handleUpload,N=(h.showContent,(0,o.useState)()),b=(0,i.Z)(N,2),g=b[0],w=b[1],Z=(0,o.useState)([]),S=(0,i.Z)(Z,2),k=(S[0],S[1]),y=(0,o.useState)(!1),D=(0,i.Z)(y,2),F=D[0],P=D[1],O=(0,o.useState)(!1),z=(0,i.Z)(O,2),E=z[0],T=z[1],U=((0,c.s0)(),function(e){var n=e.target,a=n.name,t=n.value,s=(0,r.Z)({},_);s[a]=t,A(s)}),q=(0,o.useState)({connectionName:"PostgreSQL",hostName:"abul.db.elephantsql.com",databaseName:"mabpfgiu",userName:"mabpfgiu",password:"vzKsrtuh2PTCsQwoExC7gympinp57ADp",port:"5432",schemaName:"postgres",tableName:"retail_sales_data"}),B=(0,i.Z)(q,2),_=B[0],A=B[1],I=function(){var e=(0,s.Z)((0,t.Z)().mark((function e(){var n,a,s,r;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return P(!0),e.prev=1,(n=new FormData).append("username",_.userName),n.append("password",_.password),n.append("database",_.databaseName),n.append("host",_.hostName),n.append("port",_.port),e.next=10,l.Z.post("".concat(p.sC,"/connect"),n);case 10:200===(a=e.sent).status&&(v(!0),s=JSON.parse(a.data.tables),r=Object.values(null===s||void 0===s?void 0:s.name).map((function(e){return{label:e,value:e}})),w(r)),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),console.error("Connection failed",e.t0);case 17:return e.prev=17,P(!1),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[1,14,17,20]])})));return function(){return e.apply(this,arguments)}}(),J=function(){var n=(0,s.Z)((0,t.Z)().mark((function n(){var a,s;return(0,t.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return T(!0),n.prev=1,(a=new FormData).append("tablename",null===_||void 0===_?void 0:_.tableName),a.append("schemaname","postgres"),n.next=7,l.Z.post("".concat(p.sC,"/tabledata"),a);case 7:200===(s=n.sent).status&&(v(!0),j(null,!0,s.data,_.tableName),e.setConnection(!0),e.setPostgresOpen(!1)),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(1),console.error("Failed to get data",n.t0);case 14:return n.prev=14,T(!1),n.finish(14);case 17:case"end":return n.stop()}}),n,null,[[1,11,14,17]])})));return function(){return n.apply(this,arguments)}}();return(0,o.useEffect)((function(){k(f.map((function(e){return e})))}),[f]),(0,x.jsx)("div",{className:"container3",children:(0,x.jsxs)("div",{children:[!m&&(0,x.jsx)("div",{className:"cardnew",children:(0,x.jsxs)("div",{className:"card-content",children:[(0,x.jsx)("h2",{children:"Connection Details"}),(0,x.jsx)("h5",{children:"Step 1/2"}),(0,x.jsxs)("div",{className:"input-group",children:[(0,x.jsx)("label",{htmlFor:"connection-name",children:"Connection Name"}),(0,x.jsx)("input",{type:"text",id:"connection-name",name:"connectionName",onChange:U,value:_.connectionName})]}),(0,x.jsxs)("div",{className:"input-group",children:[(0,x.jsx)("label",{htmlFor:"hostname",children:"Hostname / IP Address"}),(0,x.jsx)("input",{type:"text",id:"hostname",onChange:U,name:"hostName",value:_.hostName})]}),(0,x.jsxs)("div",{className:"input-group",children:[(0,x.jsx)("label",{htmlFor:"database-name",children:"Database Name"}),(0,x.jsx)("input",{type:"text",id:"database-name",onChange:U,name:"databaseName",value:_.databaseName})]}),(0,x.jsxs)("div",{className:"input-group",children:[(0,x.jsx)("label",{htmlFor:"username",children:"Username"}),(0,x.jsx)("input",{type:"text",id:"username",onChange:U,value:_.userName,name:"userName"})]}),(0,x.jsxs)("div",{className:"input-group",children:[(0,x.jsx)("label",{htmlFor:"password",children:"Password"}),(0,x.jsx)("input",{type:"password",id:"password",onChange:U,value:_.password,name:"password"})]}),(0,x.jsxs)("div",{className:"input-group",children:[(0,x.jsx)("label",{htmlFor:"port",children:"Port"}),(0,x.jsx)("input",{type:"text",id:"port",onChange:U,value:_.port,name:"port"})]}),(0,x.jsxs)("div",{className:"d-flex",style:{gap:"5px"},children:[(0,x.jsxs)("button",{className:"btn w-100",children:[(0,x.jsx)(d.D_,{})," Back"]}),(0,x.jsx)("button",{className:"btn btn-primary w-100",onClick:I,disabled:F,children:F?(0,x.jsx)(C,{animation:"border",size:"sm",role:"status","aria-hidden":"true"}):(0,x.jsxs)(x.Fragment,{children:["Next ",(0,x.jsx)(d.ntD,{})]})}),"                        "]})]})}),m&&(0,x.jsx)("div",{className:"cardnew",children:(0,x.jsxs)("div",{className:"card-content",children:[(0,x.jsx)("h2",{children:"Connection Details"}),(0,x.jsx)("h5",{children:"Step 2/2"}),(0,x.jsxs)("div",{className:"input-group",children:[(0,x.jsx)("label",{htmlFor:"connection-name",children:"Table Name"}),(0,x.jsx)("select",{id:"connection-name",onChange:U,name:"tableName",value:_.tableName,children:null===g||void 0===g?void 0:g.map((function(e){return(0,x.jsx)("option",{style:{padding:"8px",fontSize:"16px",fontFamily:"Arial, sans-serif",backgroundColor:"#fff",color:"#333"},value:e.value,children:e.label},e.label)}))})]}),(0,x.jsxs)("div",{className:"input-group",children:[(0,x.jsx)("label",{htmlFor:"hostname",children:"Schema Name"}),(0,x.jsx)("input",{type:"text",id:"hostname",onChange:U,name:"schemaName",value:_.schemaName})]}),(0,x.jsxs)("div",{className:"d-flex",style:{gap:"5px"},children:[(0,x.jsxs)("button",{className:"btn w-100",onClick:function(){return v(!1)},children:[(0,x.jsx)(d.D_,{})," Back"]}),(0,x.jsx)("button",{className:"btn btn-primary w-100 mt-3",onClick:J,disabled:E,children:E?(0,x.jsx)(C,{animation:"border",size:"sm",role:"status","aria-hidden":"true"}):(0,x.jsxs)(x.Fragment,{children:["Continue ",(0,x.jsx)(d.ntD,{})]})})]})]})})]})})}},85958:function(e,n,a){a.r(n);var t=a(74165),s=a(15861),r=a(29439),i=a(72791),o=a(21620),l=a(78820),c=a(57689),u=a(40071),d=a(99914),p=a(31160),m=a(80184);n.default=function(){var e,n=(0,d.E)(),a=n.uploadedData,v=n.handleUpload,h=n.showContent,x=(0,i.useState)(!1),f=(0,r.Z)(x,2),j=f[0],N=f[1],b=(0,i.useState)(!1),g=(0,r.Z)(b,2),C=g[0],w=g[1],Z=(0,i.useState)(!1),S=(0,r.Z)(Z,2),k=S[0],y=(S[1],(0,i.useState)([])),D=(0,r.Z)(y,2),F=D[0],P=D[1],O=(0,i.useState)(!1),z=(0,r.Z)(O,2),E=z[0],T=z[1],U=(0,i.useState)(null),q=(0,r.Z)(U,2),B=q[0],_=q[1],A=(0,c.s0)(),I=(0,c.TH)();console.log(I);var J=(0,i.useState)({datasource:(null===I||void 0===I||null===(e=I.state)||void 0===e?void 0:e.datasource)||""}),L=(0,r.Z)(J,2),H=L[0];L[1];(0,i.useEffect)((function(){var e;"postgresql"===(null===I||void 0===I||null===(e=I.state)||void 0===e?void 0:e.datasource)&&w(!0)}),[I.state]),(0,i.useEffect)((function(){var e=a.map((function(e){return e}));P(e),"csv"!==(null===H||void 0===H?void 0:H.datasource)&&a.length>0&&E&&Q(JSON.parse(e[0]))}),[a]);var Q=function(){var e=(0,s.Z)((0,t.Z)().mark((function e(n){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h({filename:n.filename,headers:Object.keys(n.data[0]),data:n.data});case 2:localStorage.setItem("filename",n.filename),localStorage.setItem("file",n),A("/discover");case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return console.log(null===H||void 0===H?void 0:H.datasource,"postgresql",C),(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("div",{className:"p-3",children:(0,m.jsxs)("button",{className:"btn ",onClick:function(){"csv"!=H.datasource&&C?(w(!1),A("/projects")):A("/data-source")},children:[(0,m.jsx)(u.jUh,{})," Back"]})}),!C&&(0,m.jsxs)("div",{className:"container",children:[(0,m.jsxs)("div",{className:"upload-section",children:[(0,m.jsxs)("div",{className:"upload-container",onClick:function(){"csv"===(null===H||void 0===H?void 0:H.datasource)?N(!0):A("/data-source")},children:[(0,m.jsx)(l.OzW,{size:45}),"csv"===(null===H||void 0===H?void 0:H.datasource)?(0,m.jsx)("p",{children:"Upload Dataset"}):(0,m.jsx)("p",{children:"New Data Source"})]}),"csv"===(null===H||void 0===H?void 0:H.datasource)&&j&&(0,m.jsx)(o.Z,{title:"",open:j,onOk:function(){v(B),N(!1)},confirmLoading:k,onCancel:function(){N(!1)},okText:"upload",children:(0,m.jsx)("input",{type:"file",onChange:function(e){var n=e.target.files[0];_(n)}})})]}),F.map((function(e,n){var t=e?JSON.parse(e):"";return a&&""!==t?(0,m.jsxs)("div",{className:"csv-files",onClick:function(){return Q(t)},children:[(0,m.jsx)("img",{src:"/dataThumbnail.jpeg",alt:t.filename,width:300,className:"data-img"}),(0,m.jsx)("h5",{className:"filename",children:t.filename})]},n):(0,m.jsx)(m.Fragment,{})}))]}),"postgresql"===(null===H||void 0===H?void 0:H.datasource)&&C&&(0,m.jsx)(p.Z,{setPostgresOpen:w,setConnection:T})]})}},82041:function(e,n,a){a.d(n,{Eg:function(){return s},sC:function(){return t}});var t="http://18.142.251.129:3001/api";function s(e,n,a){for(var t=null===e||void 0===e?void 0:e.map((function(e){if(n){var a=new Date(e);return isNaN(a.getTime())?null:a}return isNaN(e)?null:Number(e)})).filter((function(e){return null!==e})),s=null===t||void 0===t?void 0:t.sort((function(e,n){return e-n})),r=Math.floor((null===s||void 0===s?void 0:s.length)/a),i=(null===s||void 0===s?void 0:s.length)%a,o=[],l=0,c=function(){var e,a=u<i?r+1:r,t=null===s||void 0===s?void 0:s.slice(l,l+a);if((null===t||void 0===t?void 0:t.length)>0){var c=t[0],d=null===s||void 0===s?void 0:s.slice(l+a),p=(null===d||void 0===d?void 0:d.length)>0?d[0]:t[(null===t||void 0===t?void 0:t.length)-1],m=null===s||void 0===s?void 0:s.filter((function(e){return e>=c&&e<p})).length;o.push({value:"".concat(n?(e=c,n?new Date(e).toLocaleDateString("en-US"):e):c),count:m})}l+=a},u=0;u<a;u++)c();return o}},63366:function(e,n,a){function t(e,n){if(null==e)return{};var a={};for(var t in e)if({}.hasOwnProperty.call(e,t)){if(n.includes(t))continue;a[t]=e[t]}return a}a.d(n,{Z:function(){return t}})}}]);
//# sourceMappingURL=985.83e85d99.chunk.js.map