"use strict";(self.webpackChunkkeypulse=self.webpackChunkkeypulse||[]).push([[434],{47307:function(e,t,a){a(72791);t.Z=a.p+"static/media/topFactor.cfa15a6c0c0de9515562aeb152cb2889.svg"},88029:function(e,t,a){a(72791);var n=a(57689),l=a(80184);t.Z=function(){(0,n.TH)();return(0,l.jsx)(l.Fragment,{})}},76434:function(e,t,a){a.r(t),a.d(t,{default:function(){return b}});var n=a(74165),l=a(15861),i=a(29439),r=a(72791),s=a(88029),o=a(99914),c=(a(20830),a(47307)),d=a(31243),u=a(93433),h=a(33885),v=a(80184),f=function(e){var t=e.labelsNew,a=e.data,n=e.data2,l=e.selectedField;console.log(a,n,t);var i=(0,r.useRef)(null),s=(0,r.useRef)(null);return(0,r.useEffect)((function(){s.current&&s.current.destroy();var e=i.current.getContext("2d");return s.current=new h.ZP(e,{type:"line",data:{labels:t,datasets:[{label:"Actual",data:(0,u.Z)(a),fill:!1,borderColor:"#85D8DD",tension:.1,backgroundColor:["#85D8DD"],yAxisID:"y"},{label:"Prediction",data:[].concat((0,u.Z)(new Array(a.length>0?(null===a||void 0===a?void 0:a.length)-1:0).fill(null)),[a[a.length>0?(null===a||void 0===a?void 0:a.length)-1:0]],(0,u.Z)(n)),fill:!1,borderColor:"#85D8DD",tension:.1,backgroundColor:["#85D8DD"],yAxisID:"y",borderDash:[5,5],pointBackgroundColor:"transparent"}]},options:{chart:{type:"bar",height:350},elements:{point:{radius:0}},responsive:!0,stacked:!1,colors:["#85D8DD","#427ae3","#3dc7d1","#faa93e"],fill:{colors:["#85D8DD","#427ae3","#3dc7d1","#faa93e"]},dataLabels:{enabled:!1},plugins:{legend:{display:!0,labels:{usePointStyle:!0}},datalabels:{display:!1},tooltip:{mode:"index",intersect:!1}},stroke:{show:!0,width:2,colors:["transparent"]},scales:{y:{min:0,position:"left",title:{display:!0,text:l,color:"black",fontWeight:700,padding:5},ticks:{}},x:{barPercentage:.5,categorySpacing:0,stacked:!0,autoSkip:!1,grid:{display:!1},ticks:{autoSkip:!1}}},maintainAspectRatio:!1,tooltip:{y:{formatter:function(e){return"number"===typeof e?e:e[1]-e[0]}}}}}),function(){s.current&&s.current.destroy()}}),[t,a,n]),(0,v.jsx)("canvas",{ref:i,width:"100vh"})},p=a(72426),m=a.n(p),x=a(82041),g=a(13239),b=function(){var e=(0,r.useState)([]),t=(0,i.Z)(e,2),a=t[0],u=t[1],h=(0,r.useState)([]),p=(0,i.Z)(h,2),b=p[0],j=p[1],y=(0,r.useState)(!1),D=(0,i.Z)(y,2),N=D[0],k=D[1],w=(0,r.useState)(""),Z=(0,i.Z)(w,2),C=Z[0],S=Z[1],F=(0,r.useState)({accuracy:0,predictData:{},lables:[],data3:[],data4:[]}),I=(0,i.Z)(F,2),T=I[0],Y=I[1],H=localStorage.getItem("filename").replace(/\.[^/.]+$/,""),M=(0,r.useState)(""),A=(0,i.Z)(M,2),E=A[0],P=A[1],L=function(){var e=(0,l.Z)((0,n.Z)().mark((function e(){var t,a,l,i;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=H,e.next=3,d.Z.post("".concat(x.sC,"/predict/").concat(t),{});case 3:200===(a=e.sent).status&&(j(null===a||void 0===a||null===(l=a.data)||void 0===l?void 0:l.columns),P([null===a||void 0===a||null===(i=a.data)||void 0===i?void 0:i.columns[0]]));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),R=function(){var e=(0,l.Z)((0,n.Z)().mark((function e(t){var a,l,i,r,s,o,c,u,h,v,f,p,g,b,j,y;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k(!0),e.prev=1,e.next=4,d.Z.post("".concat(x.sC,"/forecast/").concat(H,"/").concat(E));case 4:200===(i=e.sent).status&&(null===(a=Object.keys(null===i||void 0===i||null===(l=i.data)||void 0===l?void 0:l.result))||void 0===a?void 0:a.length)>0?(c=null===i||void 0===i||null===(r=i.data)||void 0===r?void 0:r.result,u=null===c||void 0===c?void 0:c.Actual,h=null===c||void 0===c?void 0:c.prediction,v=[],f=[],p=[],g=u.date,b=g.length,g.slice(b-12,b).map((function(e){var t=new Date(e),a=m()(t).format("MMM YYYY");v.push(a)})),null===h||void 0===h||null===(s=h.date)||void 0===s||s.map((function(e,t){if(t<7){var a=new Date(e),n=m()(a).format("MMM YYYY");v.push(n)}})),j=u.values,y=j.length,j.slice(y-12,y).map((function(e){f.push(e)})),null===h||void 0===h||null===(o=h.values)||void 0===o||o.map((function(e,t){t<7&&p.push(e)})),console.log({predictData:h,labels:v,data3:f,data4:p}),Y({predictData:h,labels:v,data3:f,data4:p})):Y({accuracy:0,predictData:{},lables:[],data3:[],data4:[]}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.error("Error fetching data:",e.t0);case 11:return e.prev=11,k(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[1,8,11,14]])})));return function(t){return e.apply(this,arguments)}}();(0,r.useEffect)((function(){E&&R(E)}),[E]);var B=(0,o.E)().displayContent;(0,r.useEffect)((function(){u(B.data),S(localStorage.getItem("filename")),setTimeout((function(){}),2e3),L()}),[B]);localStorage.getItem("filename");return console.log(T),(0,v.jsx)(v.Fragment,{children:N?(0,v.jsxs)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:[" ",(0,v.jsx)(g.Z,{})]}):(0,v.jsx)(v.Fragment,{children:(0,v.jsxs)("div",{style:{height:"85vh",overflow:"hidden"},children:[(0,v.jsx)(s.Z,{}),(0,v.jsx)("div",{className:"professional-table ms-2",children:(0,v.jsxs)("div",{className:"file-details",style:{borderBottom:"1px solid #e0eaf0"},children:[(0,v.jsx)("p",{children:C}),(0,v.jsxs)("p",{children:[a.length," rows"]}),(0,v.jsxs)("p",{children:[b.length," columns"]})]})}),(0,v.jsxs)("div",{className:"row",children:[(0,v.jsx)("div",{className:"col-md-3",children:(0,v.jsxs)("div",{className:"predictLeftCont",children:[(0,v.jsx)("h1",{className:"predictHeader",children:"Forecast"}),(0,v.jsx)("h2",{className:"predictSecondHeader",children:"Forecast Fields"}),(0,v.jsx)("p",{className:"paragraphText",children:"Select which numerical or categorical fields to predict and optionally ignore."}),(0,v.jsx)("div",{className:"predictFieldsContainer",children:(0,v.jsxs)("div",{style:{alignItems:"center"},children:[(0,v.jsx)("div",{className:"px-2",children:(0,v.jsx)("input",{"data-v-27b19115":"",placeholder:"Search fields...",class:"prediction-multiselect-searchbox"})}),(0,v.jsx)("div",{style:{maxHeight:"calc(100vh - 380px)",overflow:"auto",scrollbarWidth:"thin"},className:"p-3 scrollHeight",children:b.map((function(e,t){return(0,v.jsxs)("div",{className:"d-flex p-2",style:{cursor:"pointer"},onClick:function(){return function(e){P(e)}(e)},children:[(0,v.jsx)("div",{className:E===e?"checkboxContainer checkboxTick":"checkboxContainer"}),(0,v.jsx)("h2",{className:"fieldText",children:e})]})}))})]})})]})}),(0,v.jsx)("div",{className:"col-md-9 rightContainer",children:(0,v.jsx)("div",{className:"rightttconttt",children:(0,v.jsxs)("div",{children:[(0,v.jsxs)("div",{className:"rightHeaderText",children:[(0,v.jsx)("img",{src:c.Z,alt:"imag"})," Forecast"]}),(0,v.jsx)("h2",{className:"rightDesctext",children:" The predictions of the model, compared to the historical data and extrapolated forward.                            "}),(0,v.jsx)("div",{className:"regressioncard",style:{width:"96%"},children:(0,v.jsx)("div",{className:"regressionCardInnerContainer",style:{minHeight:"400px",width:"100%"},children:(0,v.jsx)(f,{labelsNew:T.labels,data:T.data3,data2:T.data4,selectedField:E})})})]})})})]})]})})})}},82041:function(e,t,a){a.d(t,{Eg:function(){return l},sC:function(){return n}});var n="http://18.142.251.129:3001/api";function l(e,t,a){for(var n=null===e||void 0===e?void 0:e.map((function(e){if(t){var a=new Date(e);return isNaN(a.getTime())?null:a}return isNaN(e)?null:Number(e)})).filter((function(e){return null!==e})),l=null===n||void 0===n?void 0:n.sort((function(e,t){return e-t})),i=Math.floor((null===l||void 0===l?void 0:l.length)/a),r=(null===l||void 0===l?void 0:l.length)%a,s=[],o=0,c=function(){var e,a=d<r?i+1:i,n=null===l||void 0===l?void 0:l.slice(o,o+a);if((null===n||void 0===n?void 0:n.length)>0){var c=n[0],u=null===l||void 0===l?void 0:l.slice(o+a),h=(null===u||void 0===u?void 0:u.length)>0?u[0]:n[(null===n||void 0===n?void 0:n.length)-1],v=null===l||void 0===l?void 0:l.filter((function(e){return e>=c&&e<h})).length;s.push({value:"".concat(t?(e=c,t?new Date(e).toLocaleDateString("en-US"):e):c),count:v})}o+=a},d=0;d<a;d++)c();return s}},20830:function(){}}]);
//# sourceMappingURL=434.4e37a96a.chunk.js.map